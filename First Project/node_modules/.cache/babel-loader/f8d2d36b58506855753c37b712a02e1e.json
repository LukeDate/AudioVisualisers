{"ast":null,"code":"var _jsxFileName = \"/Users/admin/audio-visual/audio-visualizer/src/components/circle.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nconst Wrapper = styled('div')`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n`;\nconst CircleCanvas = styled('canvas')`\n    margin: 0 auto;\n    // height: 100%;\n`;\n\nconst CircleContainer = () => {\n  let ref = useRef();\n  let audio = new Audio();\n  let context = new (window.AudioContext || window.webkitAudioContext)();\n  let analyser = context.createAnalyser();\n  let freqArr = new Uint8Array(analyser.frequencyBinCount);\n  audio.src = \"/it_came_from_china.mp3\";\n  let source = context.createMediaElementSource(audio);\n  const [ctx, setCtx] = useState();\n  const [aSource, setSource] = useState('');\n  const [freqArray, setFreqArr] = useState('');\n  const [aAnalyser, setAnalyser] = useState('');\n  useEffect(() => {\n    let getCtx = ref.current;\n    setCtx(getCtx.getContext(\"2d\"));\n    setSource(source);\n    setFreqArr(freqArr);\n    setAnalyser(analyser);\n    initPage();\n  });\n  let radius = 150;\n  let center_x = ctx && ctx.width / 2;\n  let center_y = ctx && ctx.height / 2;\n\n  const animationLooper = (analyser, freqArr, ctx) => {\n    let bars = 200; // ctx.imageSmoothingEnabled = false;\n\n    console.log('HELLO', analyser, freqArr);\n    ctx && ctx.beginPath();\n    ctx && ctx.arc(center_x, center_y, radius, 0, 2 * Math.PI);\n    ctx && ctx.stroke();\n    analyser.getByteFrequencyData(freqArr);\n\n    for (let i = 0; i < bars; i++) {\n      let rads = Math.PI * 2 / bars;\n      let bar_height = 100;\n      let bar_width = 2;\n      let x = center_x + Math.cos(rads * i) * radius;\n      let y = center_y + Math.sin(rads * i) * radius;\n      let x_end = center_x + Math.cos(rads * i) * (radius + bar_height);\n      let y_end = center_y + Math.sin(rads * i) * (radius + bar_height);\n      drawBar(x, y, x_end, y_end, bar_width, freqArr[i], ctx && ctx);\n    }\n\n    window.requestAnimationFrame(animationLooper);\n  };\n\n  const drawBar = (x1, y1, x2, y2, width, frequency, ctx) => {\n    let lineColor = \"rgb(\" + frequency + \", \" + frequency + \", \" + 205 + \")\";\n    ctx.strokeStyle = lineColor;\n    ctx.lineWidth = width;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n  };\n\n  const initPage = ctx => {\n    // let audio = new Audio();\n    // let context = new (window.AudioContext || window.webkitAudioContext)();\n    // let analyser = context.createAnalyser();\n    // let freqArr = new Uint8Array(analyser.frequencyBinCount);\n    // audio.src = \"/it_came_from_china.mp3\";\n    // let source = context.createMediaElementSource(audio);\n    aSource.connect(aAnalyser);\n    analyser.connect(context.destination);\n    audio.play();\n    animationLooper(aAnalyser, freqArray, ctx);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircleCanvas, {\n    width: \"600\",\n    height: \"600\",\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, ctx && initPage(ctx)));\n};\n\nexport default CircleContainer;","map":{"version":3,"sources":["/Users/admin/audio-visual/audio-visualizer/src/components/circle.js"],"names":["React","useEffect","useState","useRef","styled","Wrapper","CircleCanvas","CircleContainer","ref","audio","Audio","context","window","AudioContext","webkitAudioContext","analyser","createAnalyser","freqArr","Uint8Array","frequencyBinCount","src","source","createMediaElementSource","ctx","setCtx","aSource","setSource","freqArray","setFreqArr","aAnalyser","setAnalyser","getCtx","current","getContext","initPage","radius","center_x","width","center_y","height","animationLooper","bars","console","log","beginPath","arc","Math","PI","stroke","getByteFrequencyData","i","rads","bar_height","bar_width","x","cos","y","sin","x_end","y_end","drawBar","requestAnimationFrame","x1","y1","x2","y2","frequency","lineColor","strokeStyle","lineWidth","moveTo","lineTo","connect","destination","play"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled('div')`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n`;\n\nconst CircleCanvas = styled('canvas')`\n    margin: 0 auto;\n    // height: 100%;\n`;\n\n\n\nconst CircleContainer = () => {\n    let ref = useRef();\n    let audio = new Audio();\n    let context = new (window.AudioContext || window.webkitAudioContext)();\n    let analyser = context.createAnalyser();\n    let freqArr = new Uint8Array(analyser.frequencyBinCount);\n    audio.src = \"/it_came_from_china.mp3\";\n    let source = context.createMediaElementSource(audio);\n\n    const [ctx, setCtx] = useState()\n    const [aSource, setSource] = useState('');\n    const [freqArray, setFreqArr] = useState('');\n    const [aAnalyser, setAnalyser] = useState('');\n    useEffect(() => {\n        let getCtx = ref.current;\n        setCtx(getCtx.getContext(\"2d\"));\n        setSource(source);\n        setFreqArr(freqArr);\n        setAnalyser(analyser);\n        initPage()\n    })\n\n    let radius = 150;\n    let center_x = ctx && ctx.width / 2;\n    let center_y = ctx && ctx.height / 2;\n\n    const animationLooper = (analyser, freqArr, ctx) => {\n            let bars = 200;\n            // ctx.imageSmoothingEnabled = false;\n            console.log('HELLO', analyser, freqArr);\n            ctx && ctx.beginPath();\n            ctx && ctx.arc(center_x,center_y,radius,0,2*Math.PI);\n            ctx && ctx.stroke();\n        \n            analyser.getByteFrequencyData(freqArr);\n    \n            for(let i=0; i < bars; i++) {\n                let rads = Math.PI * 2 / bars;\n                let bar_height = 100;\n                let bar_width = 2;\n                let x = center_x + Math.cos(rads * i) * (radius);\n                let y = center_y + Math.sin(rads * i) * (radius);\n                let x_end = center_x + Math.cos(rads * i)*(radius + bar_height);\n                let y_end = center_y + Math.sin(rads * i)*(radius + bar_height);\n                drawBar(x, y, x_end, y_end, bar_width, freqArr[i], ctx && ctx);\n            }\n            window.requestAnimationFrame(animationLooper);\n        \n    }\n    \n    const drawBar = (x1, y1, x2, y2, width,frequency, ctx) => {\n        let lineColor = \"rgb(\" + frequency + \", \" + frequency + \", \" + 205 + \")\";\n        ctx.strokeStyle = lineColor;\n        ctx.lineWidth = width;\n        ctx.beginPath();\n        ctx.moveTo(x1,y1);\n        ctx.lineTo(x2,y2);\n        ctx.stroke();\n    }\n    const initPage = (ctx) => {\n        // let audio = new Audio();\n        // let context = new (window.AudioContext || window.webkitAudioContext)();\n        // let analyser = context.createAnalyser();\n        // let freqArr = new Uint8Array(analyser.frequencyBinCount);\n        // audio.src = \"/it_came_from_china.mp3\";\n        // let source = context.createMediaElementSource(audio);\n        aSource.connect(aAnalyser);\n        analyser.connect(context.destination);\n        audio.play();\n        animationLooper(aAnalyser, freqArray, ctx);\n}\n    \n\n    \n    return (\n        <Wrapper>\n            <CircleCanvas width=\"600\" height=\"600\" ref={ref}>\n                {ctx && initPage(ctx)}\n                {/* <Circle />\n                <Bar /> */}\n                {/* {ctx && drawCircle()} */}\n                {/* {ctx && drawBars()} */}\n            </CircleCanvas>\n        </Wrapper>\n    )\n}\n\nexport default CircleContainer;"]},"metadata":{},"sourceType":"module"}